{"mappings":"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","sources":["src/state.ts","src/pages/home/index.ts","src/components/card/index.ts","src/index.ts"],"sourcesContent":["const state = {\r\n  data: {\r\n    tasks: [{ id: \"123\", text: \"asdf\", checked: false }],\r\n  },\r\n  listeners: [],\r\n  init() {\r\n    console.log(\"State Init\");\r\n\r\n    const localData = localStorage.getItem(\"save-state\");\r\n    this.setState(JSON.parse(localData!));\r\n  },\r\n  getState() {\r\n    return this.data;\r\n  },\r\n  getEnabledTasks() {\r\n    const lastState = this.getState();\r\n\r\n    return lastState.tasks.filter((t) => !t.deleted);\r\n  },\r\n  addTask(id: string, text: string) {\r\n    const lastState = this.getState();\r\n\r\n    lastState.tasks.push({ id, text, checked: false });\r\n    this.setState(lastState);\r\n  },\r\n  changeItemState(id: string, newValue: boolean, property: \"check\" | \"delete\") {\r\n    const lastState = this.getState();\r\n    const itemToChange = lastState.tasks.find((t) => t.id == id);\r\n    if (property == \"check\") {\r\n      itemToChange.checked = newValue;\r\n    }\r\n    if (property == \"delete\") {\r\n      itemToChange.deleted = newValue;\r\n    }\r\n    this.setState(lastState);\r\n  },\r\n  setState(newState) {\r\n    this.data = newState;\r\n\r\n    for (const cb of this.listeners) {\r\n      cb();\r\n    }\r\n    localStorage.setItem(\"save-state\", JSON.stringify(newState));\r\n  },\r\n  subscribe(callback: (any) => void) {\r\n    this.listeners.push(callback);\r\n  },\r\n  clearCache() {\r\n    if (this.getEnabledTasks().length == 0) {\r\n      console.log(\"se borraron las tasks eliminadas\");\r\n      localStorage.clear();\r\n      this.setState({\r\n        tasks: [\r\n          {\r\n            id: \"null\",\r\n            text: \"Soy necesario para que el programa no se rompa :D\",\r\n            checked: false,\r\n            deleted: true,\r\n          },\r\n        ],\r\n      });\r\n      // console.log(this.data);\r\n    }\r\n  },\r\n};\r\n\r\nexport { state };\r\n","import { state } from \"../../state\";\r\n\r\nexport function initHomePage(rootEl: HTMLElement) {\r\n  const homePageEl = document.createElement(\"div\");\r\n\r\n  homePageEl.innerHTML = `\r\n  <section class=\"content-section\">\r\n        <div class=\"title-container\">\r\n          <h1 class=\"title\">Mis pendientes</h1>\r\n        </div>\r\n        <form class=\"form\">\r\n          <div class=\"form__input-container\">\r\n            <legend class=\"form__legend\">Nuevo pendiente</legend>\r\n            <input name=\"task-text\" type=\"text\" class=\"form__input\" />\r\n          </div>\r\n          <button class=\"form__button\">Agregar</button>\r\n        </form>\r\n      </section>\r\n    <section class=\"cards-section\"></section>\r\n    `;\r\n\r\n  //agregar estilos a cards sectionn\r\n\r\n  const cardsSection = homePageEl.querySelector(\".cards-section\");\r\n\r\n  function renderTasks(tasks) {\r\n    cardsSection![\"innerHTML\"] = \"\";\r\n    for (const cardItem of tasks) {\r\n      const cardContainer = document.createElement(\"div\");\r\n      cardContainer.style.maxWidth = \"316px\";\r\n      cardContainer.style.minWidth = \"290px\";\r\n      cardContainer.style.width = \"100%\";\r\n      cardContainer.style.flexGrow = \"1\";\r\n      const card = document.createElement(\"todo-card\");\r\n      card.textContent = cardItem.text;\r\n      card.setAttribute(\"checked\", `${cardItem.checked}`);\r\n      card.setAttribute(\"id\", cardItem.id);\r\n      card.addEventListener(\"change\", (e: any) => {\r\n        state.changeItemState(e.detail.id, JSON.parse(e.detail.value), \"check\");\r\n      });\r\n      card.addEventListener(\"delete\", (e: any) => {\r\n        state.changeItemState(e.detail.id, e.detail.value, \"delete\");\r\n      });\r\n\r\n      cardContainer.appendChild(card);\r\n      cardsSection!.appendChild(cardContainer);\r\n    }\r\n  }\r\n\r\n  state.subscribe(() => {\r\n    renderTasks(state.getEnabledTasks());\r\n  });\r\n  rootEl.appendChild(homePageEl);\r\n  document.querySelector(\".form\")?.addEventListener(\"submit\", (e) => {\r\n    e.preventDefault();\r\n    state.addTask(crypto.randomUUID(), e.target![\"task-text\"].value);\r\n  });\r\n}\r\n","export function initCardComponent() {\r\n  customElements.define(\r\n    \"todo-card\",\r\n    class CardComp extends HTMLElement {\r\n      shadow;\r\n      text: string;\r\n      checked: boolean = false;\r\n      id: string;\r\n      constructor() {\r\n        super();\r\n        this.shadow = this.attachShadow({ mode: \"open\" });\r\n      }\r\n      connectedCallback() {\r\n        this.text = this.textContent || \"No me pasaron texto\";\r\n        this.checked = JSON.parse(this.getAttribute(\"checked\")!) ? true : false;\r\n\r\n        this.id = this.getAttribute(\"id\")!;\r\n\r\n        this.render();\r\n      }\r\n      render() {\r\n        const style = document.createElement(\"style\");\r\n        style.innerText = `\r\n        *{\r\n          box-sizing: border-box;\r\n        }\r\n        .card {\r\n          padding: 22px 16px 12px 13px;\r\n          width: 100%;\r\n          border-radius: 4px;\r\n          background: #fff599;\r\n          display: flex;\r\n          flex-wrap: wrap;\r\n          justify-content: space-between;\r\n        }\r\n        .card-text {\r\n          margin: 0;\r\n          /*max-width: 250px;*/\r\n          max-width: 86%;\r\n          font-family: \"Roboto\", sans-serif;\r\n          font-size: 18px;\r\n          font-style: normal;\r\n          font-weight: 400;\r\n          line-height: normal;\r\n        }\r\n        .line-through {\r\n          text-decoration: line-through;\r\n        }\r\n        .buttons-container {\r\n          display: flex;\r\n          flex-direction: column;\r\n          justify-content: space-between;\r\n          align-items: center;\r\n        }\r\n        .check-button {\r\n          width: 21px;\r\n          height: 21px;\r\n          border: 1px solid #000;\r\n          background-color: #fff;\r\n        }\r\n        .delete-button-container{\r\n          margin-top: 12px;\r\n          height: 21px;\r\n          width: 21px;\r\n        }\r\n        .delete-button {\r\n          display: none;\r\n          padding: 0;\r\n          border: none;\r\n          background-color: inherit;\r\n        }\r\n        .show{\r\n          display: block;\r\n        }\r\n        .delete-button:hover,\r\n        .check-button:hover {\r\n          scale: 1.2;\r\n        }\r\n        .delete-button__img {\r\n          height: 21px;\r\n          width: 21px;\r\n          margin: 0;\r\n        }\r\n        \r\n        .warning-container{\r\n          display: none;\r\n          position: fixed;\r\n          top: 0;\r\n          bottom: 0;\r\n          left: 0;\r\n          right: 0;\r\n          background-color: rgba(0,0,0, 0.91);\r\n          align-items: center;\r\n          justify-content: center;\r\n        }\r\n        .warning {\r\n          background-color: grey;\r\n          border-radius: 4px;\r\n          display: flex;\r\n          flex-direction: column;\r\n          align-items: center;\r\n          padding: 22px 16px 22px 16px;\r\n          width: 290px;\r\n          height: 106px;\r\n        }\r\n        .warning__title {\r\n          margin: 0;\r\n          font-family: \"Roboto\", sans-serif;\r\n          font-size: 22px;\r\n          font-style: normal;\r\n          font-weight: 500;\r\n          line-height: normal;\r\n        }\r\n        .warning__buttons-container {\r\n          margin-top: 12px;\r\n          width: 100%;\r\n          display: flex;\r\n          justify-content: space-around;\r\n        }\r\n        .cancel-btn,\r\n        .confirm-btn {\r\n          font-family: \"Roboto\", sans-serif;\r\n          font-size: 18px;\r\n          font-style: normal;\r\n          font-weight: 400;\r\n          line-height: normal;\r\n          width: 90px;\r\n          background-color: #9cbbe9;\r\n          border: none;\r\n          border-radius: 4px;\r\n        }\r\n        .cancel-btn:hover, \r\n        .confirm-btn:hover {\r\n          scale: 1.1;\r\n        }\r\n        `;\r\n\r\n        const deleteIMG = document.querySelector(\"#delete\");\r\n        const card = document.createElement(\"div\");\r\n        card.classList.add(\"card\");\r\n        card.innerHTML = `\r\n          <p class=\"card-text\">${this.text}</p>\r\n          <div class=\"buttons-container\">\r\n            <input type=\"checkbox\" class=\"check-button\" ${\r\n              this.checked ? \"checked\" : \"\"\r\n            }/>\r\n            <div class=\"delete-button-container\">\r\n              <button class=\"delete-button\">\r\n                <img src=${deleteIMG?.getAttribute(\"src\")} />\r\n              </button>\r\n            </div>\r\n          </div>\r\n        <div class=\"warning-container\">  \r\n          <div class=\"warning\">\r\n            <h3 class=\"warning__title\">Â¿Deseas borrar esta nota?</h3>\r\n            <div class=\"warning__buttons-container\">\r\n              <button class=\"cancel-btn\">Cancelar</button>\r\n              <button class=\"confirm-btn\">Borrar</button>\r\n            </div>\r\n          </div>\r\n        </div>  \r\n        `;\r\n\r\n        //esto deberia funcionar siempre y cuando el state recarge el contenido, ya que no hay ningun listener que le avise que tiene que cambiar de estilos\r\n        if (this.checked) {\r\n          card.querySelector(\".card-text\")?.classList.add(\"line-through\");\r\n        }\r\n\r\n        this.shadow.appendChild(card);\r\n        this.shadow.appendChild(style);\r\n        this.buttons();\r\n      }\r\n\r\n      buttons() {\r\n        const card = this.shadow.querySelector(\".card\");\r\n        const checkButton = this.shadow.querySelector(\".check-button\");\r\n        const deleteButton = this.shadow.querySelector(\".delete-button\");\r\n        const warning = this.shadow.querySelector(\".warning-container\");\r\n        const warningButtonCancel = this.shadow.querySelector(\".cancel-btn\");\r\n        const warningButtonConfirm = this.shadow.querySelector(\".confirm-btn\");\r\n\r\n        card.addEventListener(\"click\", () => {\r\n          setTimeout(() => {\r\n            card.style.border = \"3px solid\";\r\n            deleteButton.style.display = \"block\";\r\n          }, 1);\r\n        });\r\n        window.addEventListener(\"click\", () => {\r\n          card.style.border = \"none\";\r\n          deleteButton.style.display = \"none\";\r\n        });\r\n        checkButton.addEventListener(\"click\", (e) => {\r\n          const event = new CustomEvent(\"change\", {\r\n            detail: {\r\n              id: this.id,\r\n              value: e.target.checked,\r\n            },\r\n          });\r\n          this.dispatchEvent(event);\r\n        });\r\n        deleteButton.addEventListener(\"click\", () => {\r\n          warning.style.display = \"flex\";\r\n        });\r\n        warningButtonCancel.addEventListener(\"click\", () => {\r\n          warning.style.display = \"none\";\r\n        });\r\n        warningButtonConfirm.addEventListener(\"click\", () => {\r\n          warning.style.display = \"none\";\r\n          console.log(\r\n            \"se borro: \" + this.shadow.querySelector(\".card-text\").textContent\r\n          );\r\n          const event = new CustomEvent(\"delete\", {\r\n            detail: {\r\n              id: this.id,\r\n              value: true,\r\n            },\r\n          });\r\n          this.dispatchEvent(event);\r\n        });\r\n      }\r\n    }\r\n  );\r\n}\r\n","import { initHomePage } from \"./pages/home\";\r\nimport { initCardComponent } from \"./components/card\";\r\nimport { state } from \"./state\";\r\n\r\n(function () {\r\n  initCardComponent();\r\n  initHomePage(document.querySelector(\".root\")!);\r\n  state.init();\r\n  state.clearCache();\r\n})();\r\n"],"names":["$792e4afce125cd80$export$c837a8b98c265ae3","data","tasks","id","text","checked","listeners","init","console","log","localData","localStorage","getItem","setState","JSON","parse","getState","getEnabledTasks","this","filter","t","deleted","addTask","lastState","push","changeItemState","newValue","property","itemToChange","find","newState","cb","setItem","stringify","subscribe","callback","clearCache","length","clear","$75d7da451051ab0b$export$36e0f3cd0ce1227","rootEl","homePageEl","document","createElement","innerHTML","cardsSection","querySelector","cardItem","cardContainer","style","maxWidth","minWidth","width","flexGrow","card","textContent","setAttribute","addEventListener","e","detail","value","appendChild","renderTasks","preventDefault","crypto","randomUUID","target","customElements","define","HTMLElement","super","shadow","attachShadow","mode","connectedCallback","getAttribute","render","innerText","deleteIMG","classList","add","buttons","checkButton","deleteButton","warning","warningButtonCancel","warningButtonConfirm","setTimeout","border","display","window","event","CustomEvent","dispatchEvent"],"version":3,"file":"index.c13e60a6.js.map"}